;(function(d,f,n,r){function h(a,b){a.toggleClass("is-importing",b);p.prop("disabled",b)}function k(a,b,c){b.html(_demoImporterSettings[(c?"fail":"done")+"Message"]);_demoImporterSettings.hasPreviousImport=!c;setTimeout(function(){e=!1;h(a,e);b.empty()},parseInt(_demoImporterSettings.importFinishTimeout))}var e=!1,q=function(){var a=0,b;for(b in _demoImporterSettings.importTasks)a++;return a}(),p=d(".demo-content .demo-actions > button");d(f).on("beforeunload.demo-importer",function(){if(e)return _demoImporterSettings.beforeUnloadMessage});d(n).on("click.demo-importer",".demo-content .demo-actions > button",function(a){a.preventDefault();if(!(e||_demoImporterSettings.hasPreviousImport&&!confirm(_demoImporterSettings.hasPreviousImportMessage))){var b=0,c=d(this).closest(".demo-content"),g=c.find(".more-details"),l=c.data("demo-id"),f=c.data("wp-nonce");l&&d.each(_demoImporterSettings.importTasks,function(a,m){d.ajaxQueue({type:"POST",dataType:"json",url:_demoImporterSettings.ajaxUrl,data:{action:_demoImporterSettings.ajaxAction,_ajax_nonce:f,task:d.extend(!0,{},m,{task_id:a,demo_id:l})},beforeSend:function(){h(c,e=!0);g.html(m.status)}}).done(function(a){_demoImporterSettings.importDebug&&(a.success?console.log(a.data.result):console.log(a.data.error));++b==q&&k(c,g)}).fail(function(){k(c,g,!0)})})}})})(jQuery,window,document);