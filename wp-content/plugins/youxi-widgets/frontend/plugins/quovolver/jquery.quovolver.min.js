/**
 * jQuery Quovolver 2.0.2
 * https://github.com/sebnitu/Quovolver
 *
 * By Sebastian Nitu - Copyright 2012 - All rights reserved
 * Author URL: http://sebnitu.com
 */
;(function(d){d.fn.quovolver=function(q){var r=d.extend({},d.fn.quovolver.defaults,q);return this.each(function(){function s(c){if(f.is(":animated")||k.is(":animated")||e.is(":hidden"))return!1;1>c?c=m:c>m&&(c=1);var b={current:d(f[g-1]),upcoming:d(f[c-1])};b.currentHeight=h(b.current,"height");b.upcomingHeight=h(b.upcoming,"height");b.currentOuterHeight=h(b.current,"outerHeight");b.upcomingOuterHeight=h(b.upcoming,"outerHeight");b.currentWidth=h(b.current,"width");b.upcomingWidth=h(b.upcoming,"width");b.currentOuterWidth=h(b.current,"outerWidth");b.upcomingOuterWidth=h(b.upcoming,"outerWidth");"basic"!==a.transition&&"string"===typeof a.transition&&"function"===eval("typeof "+a.transition)?eval(a.transition+"(gotoData)"):y(b);g=c;t(u);v(u);return!1}function q(){var c;if("above"===a.navPosition||"both"===a.navPosition)e.prepend('<div class="quovolve-nav quovolve-nav-above"></div>'),c=e.find(".quovolve-nav");if("below"===a.navPosition||"both"===a.navPosition)e.append('<div class="quovolve-nav quovolve-nav-below"></div>'),c=e.find(".quovolve-nav");"custom"===a.navPosition&&""!==a.navPositionCustom&&0!==d(a.navPositionCustom).length&&(d(a.navPositionCustom).append('<div class="quovolve-nav quovolve-nav-custom"></div>'),c=d(a.navPositionCustom).find(".quovolve-nav"));a.navPrev&&c.append('<span class="nav-prev"><a href="#">'+a.navPrevText+"</a></span>");a.navNext&&c.append('<span class="nav-next"><a href="#">'+a.navNextText+"</a></span>");if(a.navNum){c.append('<ol class="nav-numbers"></ol>');for(var b=1;b<m+1;b++)c.find(".nav-numbers").append('<li><a href="#item-'+b+'">'+b+"</a></li>");t(c)}a.navText&&(c.append('<span class="nav-text"></span>'),v(c));return c}function h(a,b){var e=a[b]();if(!e||0==e){var f=a.parents().andSelf().filter(":hidden");f.each(function(){this.oDisplay=this.style.display;d(this).show()});e=a[b]();f.each(function(){this.style.display=this.oDisplay})}return e}function w(a){var b=0;a.height("auto");a.each(function(){var a;a=d(this).is(":visible")?d(this).height():h(d(this),"height");a>b&&(b=a)});a.height(b)}function t(c){a.navEnabled&&(c.find(".nav-numbers li").removeClass("active"),c.find('.nav-numbers a[href="#item-'+g+'"]').parent().addClass("active"))}function v(c){if(a.navEnabled){var b=a.navTextContent.replace("@a",g).replace("@b",m);c.find(".nav-text").text(b)}}function n(){var c="auto"==a.autoPlaySpeed?25*f[g-1].textLength+2E3:a.autoPlaySpeed;e.addClass("play");clearTimeout(l);l=setTimeout(function(){s(g+1);n()},c)}function z(){!0!==a.stopAutoPlay&&e.hover(function(){e.addClass("pause").removeClass("play");clearTimeout(l)},function(){e.removeClass("pause").addClass("play");clearTimeout(l);n()})}function A(){e.hover(function(){e.addClass("stop").removeClass("play");clearTimeout(l)},function(){})}function p(c){clearTimeout(l);s(c);a.autoPlay&&n()}function y(c){k.css("height",c.upcomingOuterHeight);c.current.hide();c.upcoming.show();!1===a.equalHeight&&k.css("height","auto")}var k=d(this),a=d.meta?d.extend({},r,k.data()):r;k.addClass("quovolve").css({position:"relative"}).wrap('<div class="quovolve-box"></div>');var x;x=a.children?"find":"children";var e=k.parent(".quovolve-box"),f=k[x](a.children),g=1,m=f.length;f.hide().filter(":first").show();if(a.navPrev||a.navNext||a.navNum||a.navText){a.navEnabled=!0;var u=q()}else a.navEnabled=!1;a.equalHeight&&(w(f),d(window).resize(function(){w(f);k.css("height",d(f[g-1]).outerHeight())}));if(a.autoPlay){"auto"==a.autoPlaySpeed&&f.each(function(){this.textLength=d(this).text().length});var l;n();a.stopOnHover?A():a.pauseOnHover&&z()}d(".nav-prev a",e).click(function(){p(g-1);return!1});d(".nav-next a",e).click(function(){p(g+1);return!1});d(".nav-numbers a",e).click(function(){p(d(this).text());return!1});d(this).bind("goto",function(a,b){p(b)})})};d.fn.quovolver.defaults={children:"",transition:"fade",transitionSpeed:300,autoPlay:!0,autoPlaySpeed:"auto",pauseOnHover:!0,stopOnHover:!1,equalHeight:!0,navPosition:"above",navPositionCustom:"",navPrev:!1,navNext:!1,navNum:!1,navText:!1,navPrevText:"Prev",navNextText:"Next",navTextContent:"@a / @b"}})(jQuery);
