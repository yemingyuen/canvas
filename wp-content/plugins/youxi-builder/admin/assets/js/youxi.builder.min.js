/**
 * Youxi Builder JS
 *
 * This script contains the page builder base code
 *
 * @package   Youxi Builder
 * @author    Mairel Theafila <maimairel@yahoo.com>
 * @copyright Copyright (c) 2013, Mairel Theafila
 */
;(function(b,e,k,l){b.Youxi.Builder.editor={instances:{},add:function(c){var a=this.get(c);if(a)return a;a=b.Youxi.Builder({editorId:c});return this.instances[c]=a},get:function(c){return this.instances[c]},init:function(){if(!this.initialized&&(this.initialized=!0,e.switchEditors&&"undefined"!=typeof tinymce)){b("a.switch-youxi-builder").each(function(){b(this).closest(".wp-media-buttons").siblings(".wp-editor-tabs").prepend(b(this).removeAttr("style"))});var c=this;this.switchEditorsGo=e.switchEditors.go;e.switchEditors.go=function(a,b){var d=c.get(a);if((!d||d.isHidden())&&"ypbl"!==b)return c.switchEditorsGo.apply(this,arguments);var h,g,e,f=tinymce.DOM;a=a||"content";b=b||"toggle";h=tinyMCE.get(a);g="wp-"+a+"-wrap";e=f.get(a);if("ypbl"===b){if(d&&!d.isHidden())return!1;h&&!h.isHidden()&&h.hide();f.removeClass(g,"tmce-active");"undefined"!==typeof QTags&&QTags.closeAllTags(a);tinyMCEPreInit.mceInit[a]&&tinyMCEPreInit.mceInit[a].wpautop&&(e.value=this.pre_wpautop(e.value));f.hide(a);f.removeClass(g,"html-active");d||(d=c.add(a));d.show();f.addClass(g,"ypbl-active")}else return"html"===b?c.switchEditorsGo.apply(this,[a,"tmce"]):"tmce"===b&&c.switchEditorsGo.apply(this,[a,"html"]),d&&!d.isHidden()&&d.hide(),f.removeClass(g,"ypbl-active"),c.switchEditorsGo.apply(this,arguments);return!1}}}};b(k).ready(function(){b.Youxi.Builder.editor.init()})})(jQuery,window,document);