/**
 * Youxi Builder JS
 *
 * This script contains the page builder base code
 *
 * @package   Youxi Builder
 * @author    Mairel Theafila <maimairel@yahoo.com>
 * @copyright Copyright (c) 2013, Mairel Theafila
 */
;(function(a,f,k,l){a.Youxi.Builder.editor={instances:{},add:function(d){var c=this.get(d);if(c)return c;c=a.Youxi.Builder({editorId:d});return this.instances[d]=c},get:function(a){return this.instances[a]},init:function(){if(!this.initialized&&(this.initialized=!0,this.backupEditorExpand(),f.switchEditors&&"undefined"!=typeof tinymce)){var d="right"==a(".wp-switch-editor").css("float");a(".wp-switch-editor.switch-youxi-builder").each(function(){var b=a(this).closest(".wp-editor-tools").find(".wp-editor-tabs");a(this).removeAttr("style")[d?"prependTo":"appendTo"](b)});var c=this;this.switchEditorsGo=f.switchEditors.go;f.switchEditors.go=function(b,a){var e=c.get(b);if((!e||e.isHidden())&&"ypbl"!==a)return c.switchEditorsGo.apply(this,arguments);var d,h,f,g=tinymce.DOM;b=b||"content";a=a||"toggle";d=tinyMCE.get(b);h="wp-"+b+"-wrap";f=g.get(b);if("ypbl"===a){if(e&&!e.isHidden())return!1;d&&!d.isHidden()&&d.hide();g.removeClass(h,"tmce-active");"undefined"!==typeof QTags&&QTags.closeAllTags(b);tinyMCEPreInit.mceInit[b]&&tinyMCEPreInit.mceInit[b].wpautop&&(f.value=this.pre_wpautop(f.value));g.hide(b);g.removeClass(h,"html-active");e||(e=c.add(b));e.show();g.addClass(h,"ypbl-active")}else return"html"===a?c.switchEditorsGo.apply(this,[b,"tmce"]):"tmce"===a&&c.switchEditorsGo.apply(this,[b,"html"]),e&&!e.isHidden()&&e.hide(),g.removeClass(h,"ypbl-active"),c.switchEditorsGo.apply(this,arguments);return!1}}},backupEditorExpand:function(){a.Youxi.Builder.editorExpandChange||a.each(a("#editor-expand-toggle").data("events").change||{},function(){if("editor-expand"==this.namespace)return a.Youxi.Builder.editorExpandChange=this.handler,!1})}};a(function(){a.Youxi.Builder.editor.init()})})(jQuery,window,document);